!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){"use strict";var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=document.getElementById("main-canvas"),a=i.getContext("2d"),l=i.width,s=i.height,c=l/20,u=s/20,d=130,h=0,f=!0,p=!1,y=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lightgray";n(this,e),this.posX=t,this.posY=r,this.color=o,this.strokeColor=i}return o(e,[{key:"draw",value:function(){var e=20*this.posX,t=20*this.posY;a.fillStyle=this.color,a.fillRect(e,t,20,20),a.strokeStyle=this.strokeColor,a.strokeRect(e,t,20,20)}},{key:"checkPosition",value:function(e){return this.posX===e.posX&&this.posY===e.posY}}]),e}(),v=function(){function e(){n(this,e),this.wallArray=[]}return o(e,[{key:"draw",value:function(e,t,r,o,n){var i=r;if("vertical"===e)for(;i<=o;)this.wallArray.push(new y(i,t,n)),i+=1;else if("horizontal"===e)for(;i<=o;)this.wallArray.push(new y(t,i,n)),i+=1;this.wallArray.forEach(function(e){return e.draw()})}}]),e}(),g=function(e){function t(){return n(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y),o(t,[{key:"draw",value:function(){var e=20*this.posX+2,t=20*this.posY-2;a.fillStyle=this.color,a.font="24px OptimusPrinceps",a.textAlign="left",a.textBaseline="top",a.fillText("â™¥",e,t)}},{key:"move",value:function(e){this.posX=e.posX,this.posY=e.posY}}],[{key:"getRandomPosition",value:function(){var e={};return e.posX=Math.floor(Math.random()*(c-2))+1,e.posY=Math.floor(Math.random()*(u-2))+1,e}}]),t}(),w=function(){function e(){n(this,e)}return o(e,null,[{key:"drawBG",value:function(){a.fillStyle="black",a.fillRect(0,0,l,s)}},{key:"drawScore",value:function(){a.fillStyle="white",a.font="20px OptimusPrinceps",a.textAlign="left",a.textBaseline="top",a.fillText("Score: "+h,45,45)}},{key:"drawBorderWalls",value:function(e,t){var r=new v;r.draw("horizontal",0,1,c,e,t),r.draw("vertical",c-1,1,u,e,t),r.draw("horizontal",u-1,0,c-1,e,t),r.draw("vertical",0,0,u-1,e,t)}},{key:"displayMiddleScreenMsg",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white";a.fillStyle=r,a.font="60px OptimusPrinceps",a.textAlign="center",a.textBaseline="middle",a.fillText(e,l/2,s/2),a.fillStyle=o,a.font="20px OptimusPrinceps",a.fillText(t,l/2,s/2+50)}},{key:"pauseOrRestart",value:function(t){p?(a.clearRect(0,0,l,s),window.location.reload()):f?(f=!1,t()):(f=!0,e.displayMiddleScreenMsg("Game Paused","Press Space to resume"))}},{key:"setFramerate",value:function(e,t){return t<61?t:h<25?t-2:h>25?t-1:t}}]),e}(),k=function(){function e(t,r,o,i,a,l){n(this,e),this.segments=[];for(var s=o;s>0;s--)this.segments.push(new y(t+s,r,i,a));this.heart=l,this.color=i,this.direction="right",this.nextDirection="right"}return o(e,[{key:"draw",value:function(){this.segments.forEach(function(e){return e.draw()})}},{key:"setDirection",value:function(e){"left"===e&&"right"===this.direction||"right"===e&&"left"===this.direction||"up"===e&&"down"===this.direction||"down"===e&&"up"===this.direction||(this.nextDirection=e)}},{key:"move",value:function(){var t=this.segments[0],r=void 0;switch(this.direction=this.nextDirection,this.direction){case"left":r=new y(t.posX-1,t.posY,this.color);break;case"right":r=new y(t.posX+1,t.posY,this.color);break;case"up":r=new y(t.posX,t.posY-1,this.color);break;case"down":r=new y(t.posX,t.posY+1,this.color)}(this.checkSelfCollision(r)||e.checkWallCollision(r))&&(p=!0),this.segments.unshift(r),r.checkPosition(this.heart)?this.eatHeart():this.segments.pop()}},{key:"eatHeart",value:function(){h+=1,d=w.setFramerate(h,d);var e=g.getRandomPosition();this.checkSelfCollision(e)?this.eatHeart():this.heart.move(e)}},{key:"checkSelfCollision",value:function(e){return this.segments.some(function(t){return t.checkPosition(e)})}}],[{key:"checkWallCollision",value:function(e){return 0===e.posX||0===e.posY||e.posX===c-1||e.posY===u-1}}]),e}(),m=function(){function e(t,r){n(this,e),this.leaderBoardData=t,this.localStorageKey=r}return o(e,[{key:"checkLocalStorage",value:function(){return null!==localStorage.getItem(this.localStorageKey)}},{key:"readLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);this.leaderBoardData=e.split(",")}},{key:"writeLocalStorage",value:function(){localStorage.setItem(this.localStorageKey,this.leaderBoardData)}},{key:"updateLeaderBoard",value:function(e){var t=this;this.leaderBoardData.reverse().some(function(r,o){return r<e&&+t.leaderBoardData[o+1]!==e&&o<t.leaderBoardData.length-1?(t.leaderBoardData[o]=t.leaderBoardData[o+1],!1):(r>e&&o<=t.leaderBoardData.length-1?t.leaderBoardData[o-1]=e:r<e&&o===t.leaderBoardData.length-1&&(t.leaderBoardData[o]=e),t.leaderBoardData.reverse(),t.writeLocalStorage(),!0)})}},{key:"displayLeaderBoard",value:function(e,t,r){a.fillStyle=r,a.font="16px OptimusPrinceps",this.readLocalStorage(),this.leaderBoardData.forEach(function(r,o){var n=0===o?e:e+t*o,i=r.length<3?"0"+r:r;i=i.length<3?"0"+i:i,a.fillText(o+1+". "+i,l/2,s/2+n)})}}]),e}(),S=new g(15,15,"red"),B=new k(5,5,3,"darkgreen","white",S),x=new m([0,0,0],"dh-game");function b(){if(!f){if(p)return w.displayMiddleScreenMsg("You Died","Press Space to restart"),x.updateLeaderBoard(h),void x.displayLeaderBoard(100,25);a.clearRect(0,0,l,s),w.drawBG(),B.move(),B.draw(),S.draw(),w.drawScore(),w.drawBorderWalls("red"),setTimeout(b,d)}}document.fonts.load('10pt "OptimusPrinceps"').then(function(){x.checkLocalStorage()?x.readLocalStorage():x.writeLocalStorage(),w.displayMiddleScreenMsg("Dark Hearts","Press Space to start game Edition"),x.displayLeaderBoard(100,25,"white")});var P={37:"left",38:"up",39:"right",40:"down"};window.addEventListener("keydown",function(e){var t=P[e.keyCode];void 0!==t&&B.setDirection(t),32===e.keyCode&&w.pauseOrRestart(b)},!0)}]);